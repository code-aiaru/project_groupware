<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <!-- head 부분 내용 -->
  <meta charset="UTF-8">
  <title>게시물 생성</title>
</head>
<body>
<h1>게시물 생성</h1>
<form id="createBoardForm">
  <label for="title">제목</label>
  <input type="text" id="title" name="title" required>
  <br>
  <label for="content">내용</label>
  <textarea id="content" name="content" required></textarea>
  <br>
  <button type="button" onclick="createBoard()">게시물 생성</button>
</form>
<a href="/boards/list">게시판 목록으로 돌아가기</a>

<script>
function createBoard() {
    // 입력된 제목과 내용을 가져옵니다.
    var title = document.getElementById("title").value;
    var content = document.getElementById("content").value;

    // JSON 데이터를 생성합니다.
    var jsonData = {
        title: title,
        content: content
    };

    // 서버로 JSON 데이터를 전송합니다.
    fetch("/api/boards/create", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(jsonData)
    })
    .then(function(response) {
        if (response.ok) {
            console.log("게시물이 성공적으로 생성되었습니다.");

            // 성공적으로 게시물을 생성한 후 /boards/list로 리디렉션합니다.
            window.location.href = "/boards/list";
        } else {
            console.error("게시물 생성 오류: " + response.status);
            // 오류 처리를 추가할 수 있습니다.
        }
    })
    .catch(function(error) {
        console.error("네트워크 오류: " + error);
        // 네트워크 오류 처리를 추가할 수 있습니다.
    });
}
</script>

</body>
</html>